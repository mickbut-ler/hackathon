import { ExternalComponentType } from '../../../components/types';
export type MixpanelProperty = string | number | boolean | any[] | null | undefined;
/**
 * Level of the funnel that is relevant for this event
 */
type ActionLevel = 'journey' | 'task' | 'page' | 'field';
/**
 * The type of action associated with the event
 */
export type ActionType = 'add' | 'reset' | 'update';
/**
 * The base event properties that are sent with every event
 */
export type BaseEventProperties = {
    category: 'pie';
    subCategory: 'pie component';
    capabilities?: string[];
    componentName?: ExternalComponentType;
    countryCode?: string;
    locale?: string;
    sdkVersion?: string;
    userAgent?: string;
};
/**
 * Additional event properties
 */
export interface AdditionalEventProperties {
    actionType?: ActionType;
    actionLevel?: ActionLevel;
    page?: string;
    field?: string;
    returnType?: 'backend' | 'validation' | (string & {});
    returnValue?: string | string[];
    additionalData?: string | string[];
    label?: string;
    category: string;
    subCategory: string;
    [key: string]: MixpanelProperty;
    'Experiment name'?: string;
    'Variant name'?: string;
}
/**
 * Name of the tracked event
 * Can be either a custom name or one of the pre-defined values
 */
export type FilterType = 'Date filter' | 'Amount filter' | 'Balance account filter' | 'Category filter' | 'Currency filter' | 'PSP reference filter' | 'Status filter';
/**
 * Name of the tracked event
 * Can be either a custom name or one of the pre-defined values
 */
export type EventName = 'Landed on page' | 'Clicked button' | 'Clicked link' | 'Modified filter' | 'Encountered error' | (string & {}) | '$experiment_started';
export type AnalyticsEventPayload = Required<BaseEventProperties> & AdditionalEventProperties;
export type EventQueueItem = {
    name: EventName;
    properties?: AnalyticsEventPayload;
};
export type EmbeddedEventItem = {
    event: string;
    properties: AnalyticsEventPayload | Record<string, MixpanelProperty>;
};
type UserEventCallback = (eventQueueItem: EventQueueItem) => void;
export declare class UserEvents {
    private readonly queue;
    private readonly subscriptions;
    private doneWaitingForSubscribers;
    /** payload of commmon props sent in every event */
    private baseTrackingPayload;
    /** properties not set with every event but that may be shared between some events
     * ex. `page` value for `Interacted with form field` events
     */
    private sharedEventProperties;
    constructor(componentName?: ExternalComponentType);
    protected add(...args: EventQueueItem[]): void;
    protected notifySubscribers(): void;
    /**
     * Adds an analytics event with all base event properties.
     */
    addEvent(eventName: EventName, properties: AdditionalEventProperties): void;
    /**
     * Adds an event with context specific to
     */
    addModifyFilterEvent(properties: Omit<AdditionalEventProperties, 'subCategory' | 'label'> & {
        label?: FilterType;
        subCategory?: string;
    }): void;
    /**
     * Tracks an experiment for Mixpanel experiment reporting
     */
    trackExperiment({ name, variant }: {
        name: string;
        variant: string;
    }): void;
    /**
     * Starts a timer for an event to measure the time it takes for an event to occur. Time is ended when `addEvent` is executed with the same key
     */
    startEvent(eventName: EventName): void;
    /**
     * Subscribes a callback to analytics events. It gets called every time
     * one of the above public methods get called, and the event data is passed back as an array.
     * The callback must have a single argument which is an array of [eventName, eventPayload?].
     * @example
     * ```js
     * const callback = ([eventName, eventPayload]) => console.log(eventName, eventPayload);
     * this.subscribe(callback);
     *
     * const exampleEventPayload = { count: 1, segmentation: { foo: 'bar' } };
     * this.addEvent('exampleEventDidOccur', exampleEventPayload);
     *
     * // `callback` will get called with `['exampleEventDidOccur', exampleEventPayload]`
     * ```
     */
    subscribe(callback: UserEventCallback): void;
    /**
     * Sets params that are sent on every event
     * */
    updateBaseTrackingPayload(baseTrackingPayload: Partial<BaseEventProperties>): void;
    /**
     * Sets params that may be shared between events
     * */
    updateSharedEventProperties: (props: Record<string, MixpanelProperty>) => void;
    /**
     * Removes a subscribed callback
     */
    unsubscribe(callback: UserEventCallback): void;
}
export declare const createUserEvents: (analyticsEnabled?: boolean, componentName?: ExternalComponentType) => Partial<UserEvents>;
export {};
//# sourceMappingURL=user-events.d.ts.map