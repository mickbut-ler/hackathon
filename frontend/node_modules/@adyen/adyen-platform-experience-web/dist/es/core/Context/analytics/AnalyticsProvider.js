import { jsx as p } from "../../../external/preact/jsx-runtime/dist/jsxRuntime.module.js";
import { useCallback as a, useMemo as m, useEffect as f } from "../../../external/preact/hooks/dist/hooks.module.js";
import { AnalyticsContext as A } from "./AnalyticsContext.js";
import { createUserEvents as v } from "../../Analytics/analytics/user-events.js";
import { usePushAnalyticEvent as g } from "../../../hooks/useAnalytics/usePushAnalyticEvent.js";
const b = ({ children: u, componentName: i, analyticsEnabled: o }) => {
  const n = g(), s = a(
    (r) => {
      const { name: e, properties: c } = r;
      n({
        event: e,
        properties: c || {}
      });
    },
    [n]
  ), t = m(() => {
    var e;
    const r = v(o, i);
    return (e = r.updateBaseTrackingPayload) == null || e.call(r, {
      sdkVersion: "1.10.0",
      userAgent: navigator.userAgent
    }), r;
  }, [o, i]);
  return f(() => {
    var r;
    if (o)
      return (r = t.subscribe) == null || r.call(t, s), () => {
        var e;
        return (e = t.unsubscribe) == null ? void 0 : e.call(t, s);
      };
  }, [o, s, t]), /* @__PURE__ */ p(A.Provider, { value: t, children: u });
};
export {
  b as AnalyticsProvider
};
