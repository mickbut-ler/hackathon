import { useRef as i, useCallback as r, useEffect as l } from "../../../external/preact/hooks/dist/hooks.module.js";
import { InteractionKeyCode as f } from "../../types.js";
import p from "../../../hooks/useBooleanState.js";
const E = () => {
  const [u, t] = p(), e = i(), c = i(() => {
    e.current && clearTimeout(e.current), e.current = void 0;
  }).current, n = r(() => {
    e.current ?? (e.current = setTimeout(() => {
      e.current = setTimeout(o, 15e3), t(!0);
    }, 500));
  }, [t]), o = r(() => {
    c(), t(!1);
  }, [t]), a = r(
    (s) => {
      s.code === f.ESCAPE && (s.preventDefault(), s.stopPropagation(), o());
    },
    [o]
  );
  return l(() => o, [o]), {
    listeners: {
      onfocusin: n,
      onfocusout: o,
      onMouseEnter: n,
      onMouseLeave: o,
      onKeyDown: a
    },
    isVisible: u
  };
};
export {
  E as useTooltipListeners
};
