import { jsx as e } from "../../../../../external/preact/jsx-runtime/dist/jsxRuntime.module.js";
import { useCallback as l, useRef as y, useEffect as v } from "../../../../../external/preact/hooks/dist/hooks.module.js";
import k from "../../../../../core/Context/useCoreContext.js";
import u from "../../../../internal/Button/Button.js";
import { ButtonVariant as f } from "../../../../internal/Button/types.js";
import { TypographyVariant as a } from "../../../../internal/Typography/types.js";
import i from "../../../../internal/Typography/Typography.js";
import { useDisputeFlow as C } from "../../context/dispute/context.js";
/* empty css                       */
import { Icon as g } from "../../../../internal/Icon/Icon.js";
import { isFunction as N } from "../../../../../utils/value/is.js";
const V = ({ onDisputeDefend: r }) => {
  const { i18n: s } = k(), { clearFiles: o, clearStates: d, dispute: n, setFlowState: t, defendResponse: c } = C(), h = l(() => {
    d(), t("details");
  }, [d, t]), _ = l(() => {
    o(), t("uploadDefenseFilesView");
  }, [o, t]), m = y(!1);
  return v(() => {
    if (!m.current && c === "success" && N(r)) {
      const p = n == null ? void 0 : n.dispute.pspReference;
      p && (m.current = !0, r({ id: p }));
    }
  }, [c, n, r]), /* @__PURE__ */ e("div", { className: "adyen-pe-defend-dispute__response", children: c === "success" ? /* @__PURE__ */ e("div", { className: "adyen-pe-defend-dispute__success", children: [
    /* @__PURE__ */ e(g, { name: "checkmark-circle-fill", className: "adyen-pe-defend-dispute__success-icon" }),
    /* @__PURE__ */ e(i, { variant: a.TITLE, children: s.get("disputes.management.defend.common.evidenceSubmitted") }),
    /* @__PURE__ */ e(i, { variant: a.BODY, className: "adyen-pe-defend-dispute__success-description", children: s.get("disputes.management.defend.chargeback.submitSuccessInfo") }),
    /* @__PURE__ */ e("div", { className: "adyen-pe-defend-dispute__success-buttons", children: /* @__PURE__ */ e(u, { variant: f.SECONDARY, onClick: h, children: s.get("disputes.management.common.actions.showDetails") }) })
  ] }) : /* @__PURE__ */ e("div", { className: "adyen-pe-defend-dispute__error", children: [
    /* @__PURE__ */ e(g, { name: "cross-circle-fill", className: "adyen-pe-defend-dispute__error-icon" }),
    /* @__PURE__ */ e(i, { variant: a.TITLE, medium: !0, children: s.get("disputes.management.defend.common.errors.somethingWentWrong") }),
    /* @__PURE__ */ e(i, { variant: a.BODY, children: s.get("disputes.management.defend.common.errors.defenseFailed") }),
    /* @__PURE__ */ e(u, { variant: f.SECONDARY, onClick: _, children: s.get("disputes.management.common.actions.goBack") })
  ] }) });
};
export {
  V as DefendDisputeResponse
};
