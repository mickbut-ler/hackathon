var f = Object.defineProperty;
var h = (o, e, t) => e in o ? f(o, e, { enumerable: !0, configurable: !0, writable: !0, value: t }) : o[e] = t;
var r = (o, e, t) => h(o, typeof e != "symbol" ? e + "" : e, t);
import { jsx as R } from "../../../external/preact/jsx-runtime/dist/jsxRuntime.module.js";
import { isCapitalRegionSupported as g } from "../../internal/CapitalHeader/helpers.js";
import { UIElement as v } from "../UIElement/UIElement.js";
import { CapitalOverview as x } from "./components/CapitalOverview/CapitalOverview.js";
import w from "../../../core/ConfigContext/session/utils/sessionReady.js";
import { EMPTY_OBJECT as l } from "../../../utils/value/constants.js";
import { noop as d } from "../../../utils/common.js";
class y extends v {
  constructor(t) {
    super(t);
    r(this, "componentToRender", () => /* @__PURE__ */ R(x, { ...this.props }));
    this.componentToRender = this.componentToRender.bind(this), this.customClassNames = "adyen-pe-capital-overview-component";
  }
  async getState() {
    var c, m;
    const { session: t } = this.props.core;
    await w(t);
    const { getDynamicGrantOffersConfiguration: s, getGrants: i } = t.context.endpoints, u = (c = t.context.extraConfig) == null ? void 0 : c.legalEntity;
    if (!g(u))
      return { state: "isInUnsupportedRegion" };
    const [a, p] = await Promise.all([
      s == null ? void 0 : s(l).catch(d),
      i == null ? void 0 : i(l).catch(d)
    ]);
    let n = "isUnqualified";
    return p && ((m = p.data) == null ? void 0 : m.length) > 0 ? n = "hasRequestedGrants" : a && a.minAmount && (n = "isPreQualified"), { state: n };
  }
}
r(y, "type", "capitalOverview");
export {
  y as CapitalOverviewElement,
  y as default
};
